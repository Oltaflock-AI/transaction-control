FROM python:3.12-slim

WORKDIR /app

# system deps (psycopg needs build sometimes; slim often OK with binary)
RUN pip install --no-cache-dir uv

COPY apps/api/pyproject.toml apps/api/uv.lock* /app/apps/api/
WORKDIR /app/apps/api

RUN uv sync || true

COPY apps/api /app/apps/api

EXPOSE 8000
